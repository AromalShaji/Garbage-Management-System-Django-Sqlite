{% extends 'base.html' %}
{% load static %}
{% block title%}
Job Applications
{% endblock %}

{% block content%}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li class="{{ message.tags }}">
        <span class="message-text">{{ message }}</span>
        <button class="close-btn">&times;</button>
    </li>
    {% endfor %}
</ul>
{% endif %}
<script>
    const closeButtons = document.querySelectorAll('.close-btn');

    closeButtons.forEach(button => {
        button.addEventListener('click', () => {
            const message = button.parentElement;
            message.remove();
        });

        setTimeout(() => {
            const message = button.parentElement;
            message.remove();
        }, 5000);
    });
</script>
<style>
    .messages {
        list-style: none;
        margin: 0;
        padding: 0;
        border-radius: 20px;
        align-items: center;
    }

    .messages li {
        background-color: #5ed474;
        border: 1px solid #88d24f;
        border-radius: 4px;
        color: #000000;
        padding: 10px;
        position: relative;
    }

    .messages li .close-btn {
        background: none;
        border: none;
        color: #000000;
        cursor: pointer;
        font-size: 1.2em;
        padding: 0;
        position: absolute;
        right: 5px;
        top: 5px;
    }

    .messages li .close-btn:hover {
        color: #515050;
    }

    .messages li .message-text {
        display: inline-block;
        max-width: 90%;
    }
</style>
<div class="hero_area container-fluid" style="background-image: url(../static/images/9.jpg); background-size: contain;">
    <section>
        <!-- header section strats -->
        <header class="header_section">
            <div class="container">
                <nav class="navbar navbar-expand-lg custom_nav-container navbar-dark bg-dark"
                    style="opacity: 0.9; border-radius: 30px; width: 100%; align-items: center;">
                    <a class="navbar-brand">
                        <span class="glow">
                            &nbsp; Eco-Cycle
                        </span>
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class=""> </span>
                    </button>

                    <div class="collapse navbar-collapse container-fluid col-sm-18" id="navbarSupportedContent">
                        <ul class="navbar-nav  mx-auto container-fluid col-sm-20">
                            <li class="nav-item active">
                                <a class="nav-link" href="{% url 'index' %}">Home<span
                                        class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#"> {{companydetails}}</a>
                            </li>
                            {% if 'company' in companydetails.role %}
                            <li class="nav-item">
                                <a class="nav-link" aria-hidden="true" href="" data-toggle="collapse"
                                    data-target="#jobofferlist"><svg xmlns="http://www.w3.org/2000/svg" width="16"
                                        height="16" fill="currentColor" class="bi bi-grid-3x3-gap-fill"
                                        viewBox="0 0 16 16">
                                        <path
                                            d="M1 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2zM1 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zM1 12a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2z" />
                                    </svg> More
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                        <div class="user_option">
                            {% if 'id' in request.session %}
                            <a href="{% url 'lgout' %}" class="order_online">Logout</a>
                            {% else %}
                            <a href="{% url 'login' %}" class="order_online">Login/Signup</a>
                            {% endif %}
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <!-- end header section -->
    </section>

    <!-- job list  start-->
    <ul class="list-group collapse align-items-end" id="jobofferlist" style="width: 1100px; align-items: center;">
        <li class="list-group-item primary bg-dark" style="color: #002bff; width: 480px;"><a class="text-light"
                href="{% url 'regjobdriverpage' %}"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-file-plus-fill" viewBox="0 0 16 16">
                    <path
                        d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM8.5 6v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 1 0z" />
                </svg> PROVIDE JOB OFFER FOR DRIVER</a>
        </li>
        <li class="list-group-item primary bg-dark" style="color: #002bff; width: 480px;"><a class="text-light"
                href="{% url 'regjobemployeepage' %}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-file-plus-fill" viewBox="0 0 16 16">
                    <path
                        d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM8.5 6v1.5H10a.5.5 0 0 1 0 1H8.5V10a.5.5 0 0 1-1 0V8.5H6a.5.5 0 0 1 0-1h1.5V6a.5.5 0 0 1 1 0z" />
                </svg> PROVIDE JOB OFFER FOR EMPLOYEE</a>
        </li>
        <li class="list-group-item primary bg-dark" style="color: #002bff; width: 480px;"><a class="text-light"
                href="{% url 'adddumbsterpage' %}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                    <path
                        d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
                    <path fill-rule="evenodd"
                        d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
                </svg> PROVIDE DUMPSTER</a>
        </li>
        <li class="list-group-item primary bg-dark" style="color: #002bff; width: 480px;"><a class="text-light" 
                href="{% url 'add_employeepage' %}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                    fill="currentColor" class="bi bi-person-fill-add" viewBox="0 0 16 16">
                    <path
                        d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Zm.5-5v1h1a.5.5 0 0 1 0 1h-1v1a.5.5 0 0 1-1 0v-1h-1a.5.5 0 0 1 0-1h1v-1a.5.5 0 0 1 1 0Zm-2-6a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                    <path
                        d="M2 13c0 1 1 1 1 1h5.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.544-3.393C9.077 9.038 8.564 9 8 9c-5 0-6 3-6 4Z" />
                </svg> ADD EMPLOYEE</a>
        </li>
    </ul>
    <!-- job list end -->

    <!-- company section -->
    <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
        <div class="offer_container">
            <div class="container">
                <div class="heading_container heading_center">
                    <h2>
                        Employee Manager
                    </h2>
                </div>
            </div>
        </div>
        <div class="container-xl px-4 mt-4">
            <!-- Account page navigation-->
            <nav class="nav nav-borders bg-dark " style="border-radius: 20px;">
                <a class="nav-link text-warning font-weight-bold ms-0" href="{% url 'profile' %}">Company Details</a>
                <a class="nav-link text-warning font-weight-bold ms-0" href="{% url 'profile_addvehicle' %}">Add
                    Vehicle</a>
                <a class="nav-link text-warning font-weight-bold ms-0" href="{% url 'profile_bookingdetails' %}">Booking
                    Details</a>
                <a class="nav-link text-warning font-weight-bold ms-0" href="{% url 'profile_jobdetails' %}">Job
                    Details</a>
                <a class="nav-link text-warning font-weight-bold ms-0" href="{% url 'profile_jobapplications' %}">Job
                    Applications</a>
                <a class="nav-link active text-warning font-weight-bold ms-0"
                    href="{% url 'employee_manager' %}">Employee Manager</a>
                <a class="nav-link text-warning font-weight-bold ms-0"
                    href="{% url 'profile_dumbstermanager' %}">Dumbster Manager</a>
            </nav>
            <!-- profile -->
            <hr class="mt-0 mb-4">
        </div>
        <!-- job details -->
        <div class="container-xl px-4 mt-4  bg-dark" id="job_details" style="background-color: #2f3031; opacity: 0.9; ">
            <!-- Account page navigation-->
            <nav class="nav nav-borders">
                <a class="nav-link text-warning active ms-0" href="" target="__blank">Assign Vehicle and Assistant for
                    Driver</a>
            </nav>
            <hr class="mt-0 mb-4">
            <!-- assign section -->
            <div class="row" id="editprofile">
                <div class="col-xl-11">
                    <!-- Account details card-->
                    <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
                        <div class="offer_container">
                            <div class="container">
                                <!-- driver -->
                                <div class="row grid">
                                    <div class="col-sm-8 col-lg-4 ">
                                        <div class="box" style="width: 1260px;">
                                            <div class="detail-box">
                                                <table style="width: 100%;">
                                                    <tr style="margin-bottom: 30px; align-items: center;">
                                                        <th style="text-align: center;
                                                        padding: 10 18px;">VEHICLE</th>
                                                        <th style="text-align: center;
                                                        padding: 0 58px;">DRIVER</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">ASSISTANT</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">DUMBSTER SERVICE</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">WASTE COLLECTING SERVICE</th>
                                                        <th></th>
                                                    </tr>
                                                    <tr>
                                                        <form method="post" action="{% url 'assign_job' %}">
                                                            {%csrf_token%}
                                                            <td style="padding: 0 50px;">
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="vehicle" id="vehicle" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="" disabled selected>Select vehicle
                                                                    </option>
                                                                    <option value="">Null</option>
                                                                    {% for i in vehicle_details %}
                                                                    <option value="{{i.vehicle_number}}">
                                                                        {{i.vehicle_number}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="driver" id="driver" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="" disabled selected>Select Driver
                                                                    </option>
                                                                    {% for i in employee_driver %}
                                                                    <option value="{{i.userid}}">{{i.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="worker" id="worker" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="" disabled selected>Select assistant
                                                                    </option>
                                                                    <option value="">Null</option>
                                                                    {% for i in employee_worker %}
                                                                    <option value="{{i.userid}}">{{i.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" required id="select1"
                                                                    onchange="updateSelect2()"
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="" disabled selected>Select dumbster
                                                                        service
                                                                        scheduled</option>
                                                                    <option value="">Null</option>
                                                                    {% for i in dumbster_booked %}
                                                                    {% if i.date >= today %}
                                                                    <option value="{{i.userid}}">{{i.userid}} :
                                                                        {{i.date}}</option>
                                                                    {% endif %}
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="service" required id="select2"
                                                                    onchange="updateSelect1()"
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="" disabled selected>Select service
                                                                        scheduled</option>
                                                                    <option value="">Null</option>
                                                                    {% for i in service_booked %}
                                                                    {% if i.date >= today %}
                                                                    <option value="{{i.userid}}">{{i.userid}} :
                                                                        {{i.date}}</option>
                                                                    {% endif %}
                                                                    {% endfor %}
                                                                </select>
                                                            </td>
                                                            <td>
                                                                <button type="submit" class="btn btn-success"
                                                                    href="{% url 'assign_job' %}">Assign</button>
                                                            </td>
                                                        </form>
                                                    </tr>
                                                    <small class="text-danger"><b>Note: Select Null, if you don't want
                                                            to select an option.</b></small>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </section>
                </div>
            </div>
            <!-- job update section-->
            <nav class="nav nav-borders">
                <a class="nav-link text-warning active ms-0" href="" target="__blank">Update Job Details</a>
            </nav>
            <hr class="mt-0 mb-4">
            <!-- assign section -->
            <div class="row" id="editprofile">
                <div class="col-xl-11">
                    <!-- Account details card-->
                    <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
                        <div class="offer_container">
                            <div class="container">
                                <!-- driver -->
                                <div class="row grid">
                                    <div class="col-sm-8 col-lg-4 ">
                                        <div class="box" style="width: 1260px;">
                                            <div class="detail-box">
                                                <table style="width: 100%;">
                                                    <tr style="margin-bottom: 30px; align-items: center;">
                                                        <th style="text-align: center;
                                                        padding: 10 18px;">VEHICLE</th>
                                                        <th style="text-align: center;
                                                        padding: 0 58px;">DRIVER</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">ASSISTANT</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">DUMBSTER SERVICE</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">WASTE COLLECTING SERVICE</th>
                                                        <th></th>
                                                    </tr>
                                                    {% for i in assignedjob %}
                                                    <tr>
                                                        <form method="post"
                                                            action="{% url 'update_assign_job' i.job_id %}">
                                                            {%csrf_token%}
                                                            <td style="padding: 0 50px;">
                                                                {% if i.vehicle_detail == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-success font-weight-bold"
                                                                    name="vehicle" id="vehicle" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.vehicle_detail}}" selected>
                                                                        {{i.vehicle_detail}}
                                                                    </option>
                                                                    <option class="text-light bg-dark" value="">Null
                                                                    </option>
                                                                    {% for j in vehicle_details %}
                                                                    <option class="text-light bg-dark"
                                                                        value="{{j.vehicle_number}}">
                                                                        {{j.vehicle_number}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="vehicle" id="vehicle" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.vehicle_detail}}" selected>
                                                                        {{i.vehicle_detail}}
                                                                    </option>
                                                                    <option class="text-light" value="">Null</option>
                                                                    {% for j in vehicle_details %}
                                                                    <option class="text-light"
                                                                        value="{{j.vehicle_number}}">
                                                                        {{j.vehicle_number}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                {% if i.employeeid == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-success font-weight-bold"
                                                                    name="driver" id="driver" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.employeeid}}" selected>
                                                                        {{i.employeeid}}
                                                                    </option>
                                                                    <option class="text-light bg-dark" value="">Null
                                                                    </option>
                                                                    {% for i in employee_driver %}
                                                                    <option value="{{i.userid}}">{{i.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="driver" id="driver" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.employeeid}}" selected>
                                                                        {{i.employeeid}}
                                                                    </option>
                                                                    <option class="text-light" value="">Null</option>
                                                                    {% for j in employee_driver %}
                                                                    <option value="{{j.userid}}">{{j.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                {% if i.assistant == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-success font-weight-bold"
                                                                    name="worker" id="worker" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.assistant}}" selected>
                                                                        {{i.assistant}}
                                                                    </option>
                                                                    <option class="text-light bg-dark" value="">Null
                                                                    </option>
                                                                    {% for j in employee_worker %}
                                                                    <option class="text-light bg-dark"
                                                                        value="{{j.userid}}">{{j.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="worker" id="worker" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.assistant}}" selected>
                                                                        {{i.assistant}}
                                                                    </option>
                                                                    <option class="text-light" value="">Null</option>
                                                                    {% for j in employee_worker %}
                                                                    <option class="text-light" value="{{j.userid}}">
                                                                        {{j.userid}}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                {% if i.dumbster_scheduled == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-success font-weight-bold"
                                                                    name="dumbster" id="select3"
                                                                    onchange="updateSelect4()" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.dumbster_scheduled}}" selected>
                                                                        {{i.dumbster_scheduled}} 
                                                                        {% if i.recollect_dumbster == 1 %}
                                                                        <b style="color: yellow;">(RE)</b>
                                                                        {% endif %}
                                                                    </option>
                                                                    <option class="text-light bg-dark" value="">Null
                                                                    </option>
                                                                    {% for j in dumbster_booked %}
                                                                    <option class="text-light bg-dark"
                                                                        value="{{j.userid}}">{{j.userid}} :
                                                                        {{j.date}}
                                                                        {% if i.recollect_dumbster == 1 %}
                                                                        <b style="color: yellow;">(RE)</b>
                                                                        {% endif %}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="select3"
                                                                    onchange="updateSelect4()" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.dumbster_scheduled}}" selected>
                                                                        {{i.dumbster_scheduled}} 
                                                                        {% if i.recollect_dumbster == 1 %}
                                                                        <b style="color: yellow;">(RE)</b>
                                                                        {% endif %}</option>
                                                                    <option class="text-light" value="">Null</option>
                                                                    {% for j in dumbster_booked %}
                                                                    <option class="text-light" value="{{j.userid}}">
                                                                        {{j.userid}} :
                                                                        {{j.date}} 
                                                                        {% if i.recollect_dumbster == 1 %}
                                                                        <b style="color: yellow;">(RE)</b>
                                                                        {% endif %}
                                                                    </option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 50px;">
                                                                {% if i.service_scheduled == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-success font-weight-bold"
                                                                    name="service" id="select4"
                                                                    onchange="updateSelect3()" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.service_scheduled}}" selected>
                                                                        {{i.service_scheduled}}</option>
                                                                    <option class="text-light bg-dark" value="">Null
                                                                    </option>
                                                                    {% for j in service_booked %}
                                                                    <option class="text-light bg-dark"
                                                                        value="{{j.userid}}">{{j.userid}} :
                                                                        {{j.date}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="service" id="select4"
                                                                    onchange="updateSelect3()" required
                                                                    style="height: fit-content; width: 120px;">
                                                                    <option value="{{i.service_scheduled}}" selected>
                                                                        {{i.service_scheduled}}</option>
                                                                    <option class="text-light" value="">Null</option>
                                                                    {% for j in service_booked %}
                                                                    <option class="text-light" value="{{j.userid}}">
                                                                        {{j.userid}} :
                                                                        {{j.date}}</option>
                                                                    {% endfor %}
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td>
                                                                <button type="submit" class="btn btn-warning"
                                                                    href="{% url 'update_assign_job' i.job_id %}">Update</button>
                                                            </td><br>
                                                        </form>
                                                    </tr>
                                                    <script>
                                                        function updateSelect3() {
                                                            var select3 = document.getElementById("select3");
                                                            var select4 = document.getElementById("select4");

                                                            if (select4.value) {
                                                                select3.value = null;
                                                            }
                                                        }

                                                        function updateSelect4() {
                                                            var select3 = document.getElementById("select3");
                                                            var select4 = document.getElementById("select4");

                                                            if (select3.value) {
                                                                select4.value = null;
                                                            }
                                                        }
                                                    </script>
                                                    {% endfor %}
                                                    <small class="text-danger"><b>Note: Select Null, Insted of <b
                                                                class="text-success">NILL</b> if you don't want
                                                            to select an option.</b></small>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </section>
                </div>
            </div>
            <!-- job assigned details -->
            <nav class="nav nav-borders">
                <a class="nav-link text-warning active ms-0" href="" target="__blank">Job Assigned</a>
            </nav>
            <hr class="mt-0 mb-4">
            <div class="row" id="editprofile">
                <div class="col-xl-11">
                    <!-- Account details card-->
                    <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
                        <div class="offer_container">
                            <div class="container">
                                <!-- driver -->
                                <div class="row grid">
                                    <div class="col-sm-8 col-lg-6 ">
                                        <div class="box" style="width: 1260px;">
                                            <div class="detail-box">
                                                <form method="post" action="">
                                                    {%csrf_token%}
                                                    <table style="width: 100%;">
                                                        <tr style="margin-bottom: 30px; align-items: center;">
                                                            <th style="text-align: center;
                                                            padding: 10 18px;">VEHICLE</th>
                                                            <th style="text-align: center;
                                                            padding: 0 58px;">DRIVER</th>
                                                            <th style=" text-align: center;
                                                            padding: 0 58px;">ASSISTANT</th>
                                                            <th style=" text-align: center;
                                                            padding: 0 58px;">DUMBSTER SERVICE</th>
                                                            <th style=" text-align: center;
                                                            padding: 0 58px;">WASTE COLLECTING SERVICE</th>
                                                            <th style=" text-align: center;
                                                            padding: 0 58px;">DATE : TIME</th>
                                                        </tr>
                                                        {% for i in assignedjob %}
                                                        <tr>
                                                            <td style="padding: 0 40px;">
                                                                {% if i.vehicle_detail == "" %}
                                                                <select
                                                                    class="form-control bg-danger bi bi-x text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.vehicle_detail}}</option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.vehicle_detail}}</option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 40px;">
                                                                {% if i.employeeid == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.employeeid}}</option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.employeeid}}</option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 40px;">
                                                                {% if i.assistant == "" %}
                                                                <select
                                                                    class="form-control bg-danger bi bi-x text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.assistant}}</option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.assistant}}</option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 40px;">
                                                                {% if i.dumbster_scheduled == "" %}
                                                                <select
                                                                    class="form-control bg-danger bi bi-x text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option class="text-light"><svg
                                                                            xmlns="http://www.w3.org/2000/svg"
                                                                            width="16" height="16" fill="currentColor"
                                                                            class="bi bi-x" viewBox="0 0 16 16">
                                                                            <path
                                                                                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                                                                        </svg></option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.dumbster_scheduled}}
                                                                        {% if i.recollect_dumbster == 1 %}
                                                                        <b style="color: yellow;">(RE)</b>
                                                                        {% endif %}
                                                                    </option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 40px;">
                                                                {% if i.service_scheduled == "" %}
                                                                <select
                                                                    class="form-control bg-danger text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option><svg xmlns="http://www.w3.org/2000/svg"
                                                                            width="16" height="16" fill="currentColor"
                                                                            class="bi bi-x" viewBox="0 0 16 16">
                                                                            <path
                                                                                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                                                                        </svg></option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option>{{i.service_scheduled}}</option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                            <td style="padding: 0 10px;">
                                                                {% if i.date == ""%}
                                                                <select
                                                                    class="form-control bg-danger text-light font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 120px;" disabled>
                                                                    <option><svg xmlns="http://www.w3.org/2000/svg"
                                                                            width="16" height="16" fill="currentColor"
                                                                            class="bi bi-x" viewBox="0 0 16 16">
                                                                            <path
                                                                                d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" />
                                                                        </svg></option>
                                                                </select>
                                                                {% else %}
                                                                <select
                                                                    class="form-control bg-dark text-success font-weight-bold"
                                                                    name="dumbster" id="dumbster" required
                                                                    style="height: fit-content; width: 190px;" disabled>
                                                                    <option>{{i.date}} : {{i.time}}</option>
                                                                </select>
                                                                {% endif %}
                                                            </td>
                                                        </tr>
                                                        {% endfor %}
                                                    </table>
                                                    <small>
                                                    </small><br>
                                                    <br>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
            <!-- employee status -->
            <nav class="nav nav-borders">
                <a class="nav-link text-warning active ms-0" href="" target="__blank">Employee Details</a>
            </nav>
            <hr class="mt-0 mb-4">
            <div class="card-body">
                <!-- content -->
                <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
                    <div class="offer_container">
                        <div class="container">
                            <!-- employees -->
                            <div class="row grid">
                                {% for i in employee_details %}
                                <div class="col-sm-6 col-lg-6">
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                    <div class="box" style="width: 400px">
                                        <div class="detail-box">
                                            <h5>
                                                {% if i.on_leave == 1 %}
                                                <span class="badge"
                                                    style="background-color: rgb(140, 54, 11); color: white; text-align: center; border-radius: 10px; height: 30px; width: 370px;">
                                                    STATUS: UNAVAILABLE</span><br>
                                                {% elif i.on_leave == 0 %}
                                                <span class="badge"
                                                    style="background-color: rgb(43, 140, 11); color: white; text-align: center; border-radius: 10px; height: 30px; width: 370px;">
                                                    STATUS: AVAILABLE</span><br>
                                                {%endif%}
                                            </h5><br>
                                            <table style="width: 370px;">
                                                <tr>
                                                    <th>Name :</th>
                                                    <td>{{i.userid}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Email :</th>
                                                    <td>{{i.eemail}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Job Type :</th>
                                                    <td>{{i.role}}</td>
                                                </tr>
                                                <tr>
                                                    <th>Phone :</th>
                                                    <td>{{i.ephone}}</td>
                                                </tr>
                                            </table>
                                            <span>{{i.driverid}}</span><br><br>
                                            <small>
                                                <form method="post"
                                                    action="{% url 'remove_employee' i.userid i.eemail %}">
                                                    {%csrf_token%}
                                                    <button type="submit" class="glow-on-hover"
                                                        href="{% url 'remove_employee' i.userid i.eemail %}"
                                                        style="width: 360px;">Remove</button>
                                                </form><br>
                                                <form method="post"
                                                    action="{% url 'make_employee_unavailable' i.userid i.eemail i.role %}">
                                                    {%csrf_token%}
                                                    {% if i.status == 1 %}
                                                    <button type="submit" class="glow-on-hover"
                                                        href="{% url 'make_employee_unavailable' i.userid i.eemail i.role %}"
                                                        style="width: 360px;">Make Employee Unavailable</button><br>
                                                    {% else %}
                                                    <button type="submit" class="glow-on-hover"
                                                        href="{% url 'make_employee_unavailable' i.userid i.eemail i.role %}"
                                                        style="width: 360px;">Make Employee Available</button><br>
                                                    {% endif %}
                                                    <small class="text-danger"><b>WARNING : MAKE SURE BEFORE MAKING A
                                                            CHOICE</b></small>
                                                </form>
                                            </small>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <!-- leave section-->
            <nav class="nav nav-borders">
                <a class="nav-link text-warning active ms-0" href="" target="__blank">Leave Applications</a>
            </nav>
            <hr class="mt-0 mb-4">
            <div class="row" id="editprofile">
                <div class="col-xl-11">
                    <!-- Account details card-->
                    <section class="offer_section layout_padding-bottom" id="offer_section layout_padding-bottom">
                        <div class="offer_container">
                            <div class="container">
                                <!-- driver -->
                                <div class="row grid">
                                    <div class="col-sm-8 col-lg-4 ">
                                        <div class="box" style="width: 1260px;">
                                            <div class="detail-box">
                                                <table style="width: 100%;">
                                                    <tr style="margin-bottom: 30px; align-items: center;">
                                                        <th style="text-align: center;
                                                        padding: 10 18px;">NAME</th>
                                                        <th style="text-align: center;
                                                        padding: 0 58px;">ROLE</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">START DATE</th>
                                                        <th style=" text-align: center;
                                                        padding: 0 58px;">END DATE</th>
                                                        <th></th>
                                                        <th></th>
                                                    </tr>
                                                    {% for i in employee_leave %}
                                                    <tr>
                                                        <td style="padding: 0 50px;">
                                                            <select
                                                                class="form-control bg-dark text-success font-weight-bold"
                                                                name="vehicle" id="vehicle" required
                                                                style="height: fit-content; width: 120px;" disabled>
                                                                <option value="{{i.userid}}" selected>
                                                                    {{i.userid.userid}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td style="padding: 0 50px;">
                                                            <select
                                                                class="form-control bg-dark text-success font-weight-bold"
                                                                name="vehicle" id="vehicle" required
                                                                style="height: fit-content; width: 120px;" disabled>
                                                                <option value="{{i.role}}" selected>{{i.role}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td style="padding: 0 50px;">
                                                            <select
                                                                class="form-control bg-dark text-success font-weight-bold"
                                                                name="vehicle" id="vehicle" required
                                                                style="height: fit-content; width: 140px;" disabled>
                                                                <option value="{{i.start_date}}" selected>
                                                                    {{i.start_date}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td style="padding: 0 50px;">
                                                            <select
                                                                class="form-control bg-dark text-success font-weight-bold"
                                                                name="vehicle" id="vehicle" required
                                                                style="height: fit-content; width: 140px;" disabled>
                                                                <option value="{{i.end_date}}" selected>{{i.end_date}}
                                                                </option>
                                                            </select>
                                                        </td>
                                                        <td style="padding: 0 50px;">
                                                            <form method="post"
                                                                action="{% url 'leave_application_approve' i.id%}">
                                                                {%csrf_token%}
                                                                <button type="submit" class="btn btn-success"
                                                                    href="{% url 'leave_application_approve' i.id%}">Approve</button>
                                                            </form>
                                                        </td>
                                                        <td style="padding: 0 10px;">
                                                            <form method="post"
                                                                action="{% url 'leave_application_reject' i.id%}">
                                                                {%csrf_token%}
                                                                <button type="submit" class="btn btn-danger"
                                                                    href="{% url 'leave_application_reject' i.id%}">Reject</button>
                                                            </form>
                                                        </td><br>
                                                    </tr>
                                                    <script>
                                                        function updateSelect3() {
                                                            var select3 = document.getElementById("select3");
                                                            var select4 = document.getElementById("select4");

                                                            if (select4.value) {
                                                                select3.value = null;
                                                            }
                                                        }

                                                        function updateSelect4() {
                                                            var select3 = document.getElementById("select3");
                                                            var select4 = document.getElementById("select4");

                                                            if (select3.value) {
                                                                select4.value = null;
                                                            }
                                                        }
                                                    </script>
                                                    {% endfor %}
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                    </section>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- end Tournament section -->

{% include 'footerbar.html' %}
<!-- list view -->
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
<!-- end list -->

<!-- jQery -->
<script src="{% static 'js/bootstrap.js' %}"></script>
<script src="{% static 'js/custom.js' %}"></script>
<script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>

<!-- Google Map -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&callback=myMap">
</script>
<!-- End Google Map -->
<script>
    function updateSelect1() {
        var select1 = document.getElementById("select1");
        var select2 = document.getElementById("select2");

        if (select2.value) {
            select1.value = null;
        }
    }

    function updateSelect2() {
        var select1 = document.getElementById("select1");
        var select2 = document.getElementById("select2");

        if (select1.value) {
            select2.value = null;
        }
    }
</script>
<style>
    table,
    th,
    td {

        border-collapse: collapse;
        border-bottom: 2px solid rgb(103, 98, 98);

    }

    th {

        width: 250px;
    }

    td {
        text-align: right;
    }


    body {
        background-image: url(../static/images/login.jpg);
        height: 100%;
        max-width: 100%;
    }

    @import url("https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,800,900");
    @import url("https://cdn.linearicons.com/free/1.0.0/icon-font.min.css");


    .glow-on-hover {
        width: 150px;
        height: 30px;
        border: none;
        outline: none;
        color: #fff;
        background: rgba(255, 138, 49, 0.718);
        cursor: pointer;
        position: relative;
        z-index: 0;
        border-radius: 10px;
    }

    .glow-on-hover:before {
        content: '';
        background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
        position: absolute;
        top: -2px;
        left: -2px;
        background-size: 400%;
        z-index: -1;
        filter: blur(5px);
        width: calc(100% + 4px);
        height: calc(100% + 4px);
        animation: glowing 20s linear infinite;
        opacity: 0;
        transition: opacity .3s ease-in-out;
        border-radius: 10px;
    }

    .glow-on-hover:active {
        color: #000
    }

    .glow-on-hover:active:after {
        background: transparent;
    }

    .glow-on-hover:hover:before {
        opacity: 1;
    }

    .glow-on-hover:after {
        z-index: -1;
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background: #111;
        left: 0;
        top: 0;
        border-radius: 10px;
    }

    @keyframes glowing {
        0% {
            background-position: 0 0;
        }

        50% {
            background-position: 400% 0;
        }

        100% {
            background-position: 0 0;
        }
    }


    .img-account-profile {
        height: 10rem;
    }

    .rounded-circle {
        border-radius: 50% !important;
    }

    .card {
        box-shadow: 0 0.15rem 1.75rem 0 rgb(33 40 50 / 15%);
    }

    .card .card-header {
        font-weight: 500;
    }

    .card-header:first-child {
        border-radius: 0.35rem 0.35rem 0 0;
    }

    .card-header {
        padding: 1rem 1.35rem;
        margin-bottom: 0;
        background-color: rgba(33, 40, 50, 0.03);
        border-bottom: 1px solid rgba(33, 40, 50, 0.125);
    }

    .form-control,
    .dataTable-input {
        display: block;
        width: 100%;
        padding: 0.875rem 1.125rem;
        font-size: 0.875rem;
        font-weight: 400;
        line-height: 1;
        color: #69707a;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #c5ccd6;
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border-radius: 0.35rem;
        transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
    }

    .nav-borders .nav-link.active {
        color: #0061f2;
        border-bottom-color: #0061f2;
    }

    .nav-borders .nav-link {
        color: #69707a;
        border-bottom-width: 0.125rem;
        border-bottom-style: solid;
        border-bottom-color: transparent;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        padding-left: 0;
        padding-right: 0;
        margin-left: 1rem;
        margin-right: 1rem;
    }
</style>
{% endblock %}
